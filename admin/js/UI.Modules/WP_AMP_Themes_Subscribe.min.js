function WP_AMP_THEMES_SUBSCRIBE(){var e=this;this.type="wp_amp_themes_subscribe",this.container,this.form,this.DOMDoc,this.send_btn,this.submitURL,this.init=function(){WATJSInterface=window.parent.WATJSInterface,this.send_btn=jQuery("#"+this.type+"_send_btn",this.container).get(0),this.form=jQuery("#"+this.type+"_form",this.container).get(0),this.addButtonsActions(),null!=this.form&&this.initValidation()},this.initValidation=function(){this.validator=jQuery("#"+this.form.id,this.container).validate({rules:{wp_amp_themes_subscribe_email:{required:!0,email:!0}},messages:{wp_amp_themes_subscribe_email:{email:"Invalid e-mail address"}},errorPlacement:function(t,i){var r=i[0].id.split("_"),s=r.length>1?r[r.length-1]:r[0],a=jQuery("#error_"+s+"_container",e.DOMDoc);t.appendTo(a)},errorElement:"span"});var t=jQuery("#"+this.type+"_email",this.container);t.data("holder",t.attr("placeholder")),t.focusin(function(){jQuery(this).attr("placeholder","")}).focusout(function(){jQuery(this).attr("placeholder",jQuery(this).data("holder"))})},this.addButtonsActions=function(){jQuery(this.send_btn).unbind("click"),jQuery(this.send_btn).bind("click",function(){e.disableButton(this),e.validate()}),e.enableButton(this.send_btn),jQuery("#"+e.form.id,e.DOMDoc).bind("keypress",function(e){if(13==e.keyCode)return!1})},this.enableButton=function(e){jQuery(e).css("cursor","pointer"),jQuery(e).animate({opacity:1},100)},this.disableButton=function(e){jQuery(e).unbind("click"),jQuery(e).animate({opacity:.4},100),jQuery(e).css("cursor","default")},this.validate=function(){jQuery(this.form).validate().form();var t=[];for(var i in this.validator.invalid){var r=jQuery(this.form[i]);t.push(r.offset().top)}0==t.length?e.sendData():e.addButtonsActions()},this.sendData=function(){WATJSInterface.Preloader.start(),jQuery.ajax({url:e.submitURL,type:"post",data:{email:jQuery("#"+e.type+"_email",e.container).val(),list:"amp"},dataType:"jsonp",success:function(t){if(WATJSInterface.Preloader.remove(100),1===Number(String(t.status)))WATJSInterface.Loader.display({message:"Your subscription has been confirmed."}),jQuery(e.form).hide(),jQuery("#"+e.type+"_added",e.container).show(),jQuery.post(ajaxurl,{action:"wp_amp_themes_subscribe",wp_amp_themes_subscribed:1},function(e){});else{var i="There was an error. Please reload the page and try again in few seconds or contact the plugin administrator if the problem persists.";t.message&&""!=t.message&&(i="There was an error: "+String(t.message)),WATJSInterface.Loader.display({message:i}),e.form.reset(),setTimeout(function(){var t=e.form.elements;for(nElems=t.length,j=0;j<nElems;j++)t[j].disabled=!1},300),e.addButtonsActions()}},error:function(){WATJSInterface.Preloader.remove(100),WATJSInterface.Loader.display({message:"There was an error. Please reload the page and try again in few seconds or contact the plugin administrator if the problem persists."})}})}}